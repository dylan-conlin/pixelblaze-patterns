{
  "name": "Example: ui controls (lightning ZAP!)",
  "id": "TkPYS2XhdyGYxZz8y",
  "sources": {
    "main": "/*\n  Lightning ZAP!\n  \n  This pattern illustrates how you can create user interface controls that show\n  up in the Pixelblaze pattern list and code editor (on wider screens, look to\n  the right above the Vars Watch). Controls are created automatically when you\n  export functions that have names beginning with \"hsvPicker\", \"rgbPicker\", or\n  \"slider\". See further documentation below the code editor.\n  \n  This pattern was for a Halloween installation of bifurcated strips that split\n  off to look like lightning bolts. While many examples show smooth wave\n  functions, this example shows one way to work with bigger chunks of time.\n  \n  Strips: https://www.instagram.com/p/B4F-93EBNVV/\n  Installed: https://www.instagram.com/p/B4TuvDSBXHl/\n*/\n\n// Add a color picker control to make it easy to change the color of the bolts!\n// Set up variables to store the chosen bolt color\nvar hue = 0, saturation = 0, value = 1\nexport function hsvPickerBoltColor(_h, _s, _v) {\n  hue = _h\n  saturation = _s\n  value = _v\n}\n\n// Add a slider control to select the speed of the lightning bolts\nfade = 15  // How fast each lightning bolt section fades out\ndelayFactor = 15  // Determines the time between successive bolt segments\nresetDelayFactor = 1000 // Determines the pause between complete lightning bolts\n// _v from the slider will be in 0..1\nexport function sliderBoltSpeed(_v) {\n  fade = 2 + _v * 13 // fade will therefore be set to something between 2 and 15\n  delayFactor = 15 + (1 - _v) * 15\n  resetDelayFactor = 1000 + (1 - _v) * 2000\n}\n\n// Set up each bolt segment to be between 1/15th and 1/6th of the strip length\nboltMin = floor(pixelCount / 15)\nboltMax = ceil(pixelCount / 6)\n\npixels = array(pixelCount)\nx = 0\ntimer = 0\n\nexport function beforeRender(delta) {\n  // Most frames we are fading all pixels and counting down a timer\n  for (i = 0; i < pixelCount; i++)\n    pixels[i] -= (pixels[i] * fade * (delta / 1000)) + (1 >> 16)\n  \n  // `timer` is the ms remaining before we ignite a new lightning bolt section\n  timer -= delta\n  \n  if (timer <= 0) {\n    // New lightning bolt segment's size, in pixels\n    boltSize = boltMin + random(boltMax - boltMin)\n    while (boltSize-- > 0 && x < pixelCount) {\n      pixels[x++] = 1  // Fill these pixels bright white\n    }\n\n    timer = random(delayFactor) + delayFactor / 5\n    // Squaring makes longer delays, and makes them rarer. A delayFactor of 15\n    // produces 9ms-324ms timers between successive bolt segments igniting.\n    timer *= timer \n    \n    // If a lightning bolt has reached the end of the strip,\n    if (x >= pixelCount) {\n      x = 0\n      // Pause between bolts for 0.33-1.33 * resetDelayFactor milliseconds\n      timer = random(resetDelayFactor) + resetDelayFactor/3\n    }\n  }\n}\n\nexport function render(index) {\n  v = pixels[index]\n  hsv(hue, saturation, v * value)\n}\n"
  },
  "preview": "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"
}