{
  "name": "lightning ZAP!",
  "id": "xxWQZsCjmRQQx4vsW",
  "sources": {
    "main": "/*\n  Lightning ZAP!\n  \n  This pattern was for a Halloween installation of bifurcated strips that split\n  off to took like lightning bolts. While many examples show smooth wave\n  functions, this example shows one way to work with bigger chunks of time.\n  \n  Strips: https://www.instagram.com/p/B4F-93EBNVV/\n  Installed: https://www.instagram.com/p/B4TuvDSBXHl/\n*/\n\n// Set up each bolt segment to be between 1/15th and 1/6th of the strip length\nboltMin = floor(pixelCount / 15)\nboltMax = ceil(pixelCount / 6)\ndelayFactor = 15  // Determines the time between successive bolt segments\nresetDelayFactor = 1000 // Determines the pause between complete lightning bolts\nfade = 15  // How fast each lightning bolt section fades out\n\npixels = array(pixelCount)\nx = 0\ntimer = 0\n\n// Set up variables to store the chosen bolt color\nvar hue = 0, saturation = 0, value = 1\n// Add a color picker control to make it easy to change the color of the bolts!\nexport function hsvPickerBoltColor(_h, _s, _v) {\n  hue = _h\n  saturation = _s\n  value = _v\n}\n\nexport function beforeRender(delta) {\n  // Most frames we are fading all pixels and counting down a timer\n  for (i = 0; i < pixelCount; i++)\n    pixels[i] -= (pixels[i] * fade * (delta / 1000)) + (1 >> 16)\n  \n  // `timer` is the ms remaining before we ignite a new lightning bolt section\n  timer -= delta\n  \n  if (timer <= 0) {\n    // New lightning bolt segment's size, in pixels\n    boltSize = boltMin + random(boltMax - boltMin)\n    while (boltSize-- > 0 && x < pixelCount) {\n      pixels[x++] = 1  // Fill these pixels bright white\n    }\n\n    timer = random(delayFactor) + delayFactor / 5\n    // Squaring makes longer delays, and makes them rarer. A delayFactor of 15\n    // produces 9ms-324ms timers between successive bolt segments igniting.\n    timer *= timer \n    \n    // If a lightning bolt has reached the end of the strip,\n    if (x >= pixelCount) {\n      x = 0\n      // Pause between bolts for 0.33-1.33 * resetDelayFactor milliseconds\n      timer = random(resetDelayFactor) + resetDelayFactor/3\n    }\n  }\n}\n\nexport function render(index) {\n  v = pixels[index]\n  hsv(hue, saturation, v * value)\n}\n"
  },
  "preview": "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"
}