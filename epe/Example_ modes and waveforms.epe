{
  "name": "Example: modes and waveforms",
  "id": "sCyaMqsmsrdM9JbJi",
  "sources": {
    "main": "/*\n * In this example you'll see:\n * - Using an array to switch between modes\n * - Lambda style function expressions\n * - Different waveform functions and combinations\n * - Accumulating delta to make a mode switch timer\n * - Using UI controls\n */\n \n// Keep track of how many modes there will be\nnumModes = 13\nmodes = array(numModes) // Make an array to store the modes\n\n// Make a bunch of lambda style mode functions and put them in the modes array\n// f is expected to be in 0..4\nmodes[0] = (f) => f % 1 // This will just cause any numbers above 1.0 to wrap around\nmodes[1] = (f) => triangle(f) // triangle has a linear slope\nmodes[2] = (f) => wave(f) // wave uses the sin to create rounded slopes\nmodes[3] = (f) => square(f, .5) // A square wave is just on or off and has no transition\nmodes[4] = (f) => triangle(triangle(f)) // Combining wave functions can create interesting effects\nmodes[5] = (f) => wave(triangle(f))\nmodes[6] = (f) => triangle(wave(f))\nmodes[7] = (f) => wave(wave(f))\nmodes[8] = (f) => square(wave(triangle(f)), .7) // Here we've made a dash-dot-dash pattern\nmodes[9] = (f) => wave(f) * triangle(f * 1.3) // By multiplying waveforms, we get a darken effect\nmodes[10] = (f) => (wave(f*1) + triangle(f * 3.3)) / 2 // Blend waveforms by averaging them\nmodes[11] = (f) => triangle(f*2) - wave(f * 1.5) // Subtraction can create interesting interference patterns\nmodes[12] = (f) => abs(triangle(f) - wave(f * 2)) // Subtraction with absolute value gives a distance\n\ntimer = 0 // Accumulate all the deltas each animation frame\nmode = 0 // Start with mode 0\n\n// To create a UI slider control in the Pixelblaze IDE, write an event handler \n// that starts with \"slider\". All UI handlers in a parrtern are called when \n// *any* UI control changes. The value passed into this function will be between\n// 0 and 1. Sliders remember their position.\nvar s = 0 // Default to white\nexport function sliderSaturaton(v) { s = v }\n\n// To create a color picker UI control, write an event handler that starts with \n// \"hsvPicker\" or \"rgbPicker\". The first argument to the handler will be the hue.\n// Here we discard the saturation and brightness value that are also passed in.\n// The underscore just differentiates the local var _h from the global h.\nvar h = 0\nexport function hsvPickerHue(_h, _s, _v) { h = _h }\n\n// The beforeRender function is called once before each animation frame\n// and is passed a delta in fractional milliseconds since the last frame.\n// This has very high resolution, down to 6.25 nanosecons!\nexport function beforeRender(delta) {\n  timer += delta // Accumulate all the deltas into a timer\n  if (timer > 600) { // After 600ms, rewind the timer and switch modes\n    timer -= 600\n    mode = (mode + 1) % numModes // Go to the next mode, and keep between 0 and numModes\n  }\n  \n  // Uncomment this line to check out a specific mode\n  // mode = 0\n}\n\n// The render function is called for every pixel. Here we're going to use \n// the pixel's index to make a number between 0.0 and 4.0. This acts as a 4X \n// frequency modifier, repeating the pattern 4 times across the strip length.\n// That 0-4 value is passed in to the current mode function and its output is \n// used to set the pixel's hue. hsv() \"wraps\" hue between 0.0 and 1.0.\nexport function render(index) {\n  // Look up the current mode function and call it\n  v = modes[mode](4 * index / pixelCount)\n  hsv(h, s, v)\n}"
  },
  "preview": "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"
}