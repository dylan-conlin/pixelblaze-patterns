{
  "name": "Utility: Mapping helper 2D/3D",
  "id": "LLAbRwr4xaYTfMkZy",
  "sources": {
    "main": "/*\n  Utility: Mapping helper 2D / 3D\n  \n  This pattern plays several patterns through 1D, 2D, and 3D coordinate space to\n  help you debug the pixel maps you develop for your physical installation in\n  the Mapper tab.\n    \n  Output demo: https://youtu.be/yasYcLyJopI\n  \n  This pattern builds on concepts developed by Roger Cheng:\n    https://newscrewdriver.com\n    Github: Roger-random / Twitter: @Regorlas\n\n  His code has great expanded explanations and is linked below, near the\n  corresponding modes.\n  \n  Jeff Vyduna edited for brevity and added additional modes.\n*/\n\n// Several modes sweep a surface through space. This sets the thickness of those\n// surfaces. Use a higher percentage for projects with fewer pixels.\nvar thickness = 0.125\n\nvar modeCount = 4  // Total number of modes cycling through\nvar modes = array(modeCount)\nvar secPerMode = 6\n\n// These are the animation modes it will cycle through\nmodes[0] = planarSweeps\nmodes[1] = axesAndRadius\nmodes[2] = mapperAnim\nmodes[3] = octants\n\n\nvar tBlink, tIndexChase, sphereRadius\nexport function beforeRender(delta) {\n  tBlink = time(2 / 65.536)\n\n  tIndexChase = time(secPerMode / 65.536)\n  sphereRadius = tIndexChase * sqrt(3) // 0..vector distance to (1,1,1)\n  \n  tMode = time(secPerMode * modeCount / 65.536)\n  mode = floor(modeCount * tMode)\n  \n  // mode = 1  // Set this to freeze a particular mode\n}\n\nexport function render3D(index, x, y, z) {\n  modes[mode](index, x, y, z)\n  \n  chaseIndex(index)\n  \n  if (index == 0) blinkWRGB()  // First pixel blinks white, then R-G-B\n  if (index == pixelCount - 1) pulseRed() // Last pixel pulses red\n}\n  \nexport function render2D(index, x, y) {\n  render3D(index, x, y, 0)\n}\n\nexport function render(index) {\n  render2D(index, index / pixelCount, 0)\n}\n\n\n\n/*\n  Sweep 3 orthogonal planes through 3D space. The color corresponds to the \n  traditional color of the axis that the plan is normal to. \n\n  Derived from Roger Cheng's \"RGB-XYZ 3D Sweep\"\n  https://github.com/Roger-random/glowflow/blob/master/rgbxyz%20sweep\n*/\n\nfunction planarSweeps(index, x, y, z) {\n  oneAtATime = false  // Your choice\n  \n  // tIndexChase is scaled to begin before 0 and end after 1 so the sweeps\n  // start and finish outside the visible space\n  o = 1 + 2 * thickness\n  t = o * tIndexChase - thickness\n  \n  if (oneAtATime) {\n    t *= 3\n    rgb(near(x, t), near(y, t - o), near(z, t - 2 * o))\n  } else {\n    rgb(near(x, t), near(y, t), near(z, t))\n  }\n}\n\n\n// Color the axes and sweep a sphere through space, centered around the origin\nfunction axesAndRadius(index, x, y, z) {\n  if (y < thickness & z < thickness) rgb(0.5, 0, 0) // Red X-axis\n  if (x < thickness & z < thickness) rgb(0, 0.5, 0) // Green Y-axis\n  if (x < thickness & y < thickness) rgb(0, 0, 0.5) // Blue Z-axis\n  \n  // Distance between this pixel and 0,0,0\n  distance = sqrt(x * x + y * y + z * z)\n  \n  // v == 1 right at the shell radius\n  v = near(sphereRadius, distance)\n  \n  // Color this part of the shell according to which axis it's closest to\n  if (v > 0.01) rgb(v * x / distance, v * y / distance, v * z / distance)\n}\n\n\n// This is similar to the rainbow animation simulated in the mapper tab\nfunction mapperAnim(index, x, y, z) {\n  h = index / pixelCount + tIndexChase\n  v = 0.2 + 0.7 * (near(index / pixelCount, tIndexChase) > 0.5)\n  hsv(h, 1, v * v)\n}\n\n\n/*\n  Divide XYZ space into octants and color them distinctly. This is particularly\n  useful when assembling a walled cube from six square matrices.\n\n  Derived from Roger Cheng's \"RGB-XYZ 3D Octants\"\n  https://github.com/Roger-random/glowflow/blob/master/rgbxyz%20octants\n*/\nfunction octants(index, x, y, z) {\n  // An octant's max brightness. Note that 1/8 of all 3D space is white in this\n  // mode, so this lets you be extra cautious of heat and current\n  var oB = 0.3\n\n  r = (x > 0.5) * oB\n  g = (y > 0.5) * oB\n  b = (z > 0.5) * oB\n  rgb(r, g, b)\n}\n\n/*\n  Chase white through indices in ascending order. Note that in single pixel\n  mode, if tIndexChase takes 6 seconds and the pattern is running on a large\n  installation at 30FPS, only 180 of the total pixels will light.\n*/\nfunction chaseIndex(index) {\n  longTail = false  // Choose whether to render a single pixel or a faded tail\n  \n  if (longTail) {\n    v = near(index / pixelCount, tIndexChase)\n    on = (tIndexChase - index / pixelCount) > 0 && v > 0\n    if (on) hsv(0, 0, v)\n  } else {\n    if (index == floor(tIndexChase * pixelCount)) hsv(0, 0, 1)\n  }\n}\n\n\n// Returns 1 when a & b are proximate, 0 when they are more than `thickness`\n// apart, and a gamma-corrected brightness for distances within `thickness`\nfunction near(a, b) {\n  v = clamp(1 - abs(a - b) / thickness, 0, 1)\n  return v * v\n}\n\n// Blink a pixel white, then a quick red, green, and blue. This can help\n// diagnose RGB color ordering misconfigurations.\nfunction blinkWRGB() {\n  step = floor(16 * tBlink)                         // 0123456789.....16\n  h = floor(step % 8 / 2) / 3                       // RRGGBBrrRRGGBBrr\n  v = step < 6 || step < 13 && (step - 7) % 2 == 1  // 1111110010101000\n  hsv(h, step > 6, v)                               // WWWWWW__R_G_B___\n}\n\nfunction pulseRed() { hsv(0, 1, triangle(tBlink * 4)) }\n"
  },
  "preview": "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"
}