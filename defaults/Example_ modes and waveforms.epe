{
  "name": "Example: modes and waveforms",
  "id": "5oaoxbPRNaJuX86yG",
  "sources": {
    "main": "/*\n  In this example you'll see:\n  - Using an array to switch between modes\n  - Lambda style function expressions\n  - Different waveform functions and combinations\n  - Accumulating delta to make a mode switch timer\n  - Creating and using UI controls\n*/\n \n// Keep track of how many modes there will be\nnumModes = 13\nmodes = array(numModes) // Make an array to store the modes\n\n// Make a bunch of lambda style mode functions and put them in the modes array\n// f is expected to be in 0..frequency \nmodes[0]  = (f) => f % 1 // This will just cause any numbers above 1.0 to wrap around\nmodes[1]  = (f) => triangle(f) // triangle has a linear slope\nmodes[2]  = (f) => wave(f) // wave uses the sin to create rounded slopes\nmodes[3]  = (f) => square(f, .5) // A square wave is just on or off and has no transition\nmodes[4]  = (f) => triangle(triangle(f)) // Combining wave functions can create interesting effects\nmodes[5]  = (f) => wave(triangle(f))\nmodes[6]  = (f) => triangle(wave(f))\nmodes[7]  = (f) => wave(wave(f))\nmodes[8]  = (f) => square(wave(triangle(f)), .7) // Here we've made a dash-dot-dash pattern\nmodes[9]  = (f) => wave(f) * triangle(f * 1.3) // By multiplying waveforms, we get a darken effect\nmodes[10] = (f) => (wave(f*1) + triangle(f * 3.3)) / 2 // Blend waveforms by averaging them\nmodes[11] = (f) => triangle(f*2) - wave(f * 1.5) // Subtraction can create interesting interference patterns\nmodes[12] = (f) => abs(triangle(f) - wave(f * 2)) // Subtraction with absolute value gives a distance\n\ntimer = 0 // Accumulate all the deltas each animation frame\nmode = 0 // Start with mode 0\n\n/* \n  To create a color picker UI control, write an event handler that starts with \n  \"hsvPicker\" or \"rgbPicker\". A color picker will appear in the code editor\n  as well as when this pattern is selected from the main pattern list. The hue,\n  saturation, and value selected in the web interface are passed as arguments to\n  this handler as values between 0.0 and 1.0. The underscore just differentiates\n  the local variable `_h`` from the global variable, `h`.\n*/\nvar h = 0, s = 0, v = 1\nexport function hsvPickerColor(_h, _s, _v) { h = _h; s = _s; v = _v }\n\n/*\n  To create a UI slider control in the Pixelblaze IDE, write an event handler \n  that starts with \"slider\". All UI handlers in a pattern are called when \n  *any* UI control changes. The value passed into this function will be between\n  0 and 1. Sliders remember their position.\n*/\nvar frequency = 4 // Default to repeating waveforms 4 times across a strip\nexport function sliderFrequency(x) { frequency = 1 + 7 * x } // 1.0 to 8.0\n\n\n/* \n  The beforeRender function is called once before each animation frame\n  and is passed a delta in fractional milliseconds since the last frame.\n  This has very high resolution, down to 6.25 nanoseconds!\n*/\nexport function beforeRender(delta) {\n  timer += delta // Accumulate all the deltas into a timer\n  if (timer > 600) { // After 600ms, rewind the timer and switch modes\n    timer -= 600\n    mode = (mode + 1) % numModes // Go to the next mode, and keep between 0 and numModes\n  }\n  \n  // Uncomment this line to check out a specific mode\n  // mode = 0\n}\n\n/*\n  The render function is called for every pixel. Here we're going to use the\n  pixel's index to make a number between 0.0 and `frequency`. `frequency` is\n  set in sliderFrequency() above to have a range from 1.0 to 8.0, selectible \n  by you in the Pixelblaze web interface. The result is that the math function\n  selected by `mode` will be repeated `frequency` times across the strip length.\n  The function's output modulates the pixel's brightness `v`alue.\n*/\nexport function render(index) {\n  // Look up the current mode function and call it\n  brightness = modes[mode](frequency * index / pixelCount)\n\n  hsv(h, s, v * brightness)\n}\n"
  },
  "preview": "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"
}