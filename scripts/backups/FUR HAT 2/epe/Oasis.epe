{
  "name": "Oasis",
  "id": "X7E55PFQFK2QYpuEB",
  "sources": {
    "main": "/*\n Oasis -- peaceful light dances on waves.\n \n A quiet space to rest and reflect on what we've \n lost in this strangest of years, and to remember\n the beauty that remains, and the tasks that \n must still be begun and finished...\n \n Inspired by FASTLEd's Pacifica effect\n\n Version  Author        Date        Comment\n 1.0.0    JEM(ZRanger1) 10/20/2020 \n 1.0.1    JEM(ZRanger1) 11/27/2020  Updated wavelength scaling method\n 1.0.2    JEM(ZRanger1) 11/30/2020  Fixed phase offset bug\n*/ \n\n// constant wave descriptor array indices.\n// !!!Be extremely careful when changing or adding indices to this list!!!\n// Not used in beforeRender() or render() -- it makes enough of a performance\n// difference here to matter.  Static numbers are a hair faster.\nvar _speed = 0;        // base wave movement speed \nvar _direction = 1;    // direction - 0 = down, 1 = up\nvar _divisor = 2;      // wavelength divisor \nvar _tSpeed = 3;       // speed timer;\nvar _cSpeed = 4;       // current speed, based on UI slider\nvar _cWlen = 5;        // current wavelength divisor\n\nvar descriptorSize = 6;\n\n// wave descriptors\nvar layer1 = array(descriptorSize);\nvar layer2 = array(descriptorSize);\nvar layer3 = array(descriptorSize);\nvar layer4 = array(descriptorSize);\n\n// brightness adjustment lookup table\nvar gamma = array(512);\n\n// UI control variables\nexport var speed = 1;\nexport var whiteCaps = 1.46; \nexport var depth = 0.65;\nexport var aura = 0.66667\nexport var wavelenScale = 1\n\nvar baseHue;  \n\n// UI functions\nexport function sliderHue(v) {\n  aura = v\n}\n\nexport function sliderSpeed(v) {\n  speed = 1.5+(4.5 * (1-v))\n}\n\nexport function sliderWhitecaps(v) {\n  whiteCaps = 1+(1-v);\n}\n\nexport function sliderDepth(v) {\n  depth = (1-v);\n}\n\nexport function sliderWavelength(v) {\n  wavelenScale = 0.15+(2 * (1-v));\n  setup();\n}\n\n// short functions that calculate brightness for a waveform moving\n// in either direction\nfunction waveReverse(n) {\n  return 1-time(n);\n}  \nfunction waveForward(n) {\n  return time(n);\n}\n\n// calculate sum of all waves at a pixel.  Returns averaged and\n// gamma corrected value. \nfunction gammatron(index) {\n  var v,n;\n  n = ((index + layer1[3]) * layer1[5]) / pixelCount;\n  v = gamma[511 * (n % 1)];\n  \n  n = ((index + layer2[3]) * layer2[5]) / pixelCount;\n  v += gamma[511 * (n % 1)];\n\n  n = ((index + layer3[3]) * layer3[5]) / pixelCount;\n  v += gamma[511 * (n % 1)];\n\n  n = ((index + layer4[3]) * layer4[5]) / pixelCount;\n  v += gamma[511 * (n % 1)];\n  \n  return v / 4;\n}  \n\n// make sure that the overall wave density stays about\n// the same regardless of strip size\nfunction scaleWaveToStrip(divisor) {\n  return  divisor * (pixelCount / 150);\n}\n\n// makes sure movment speed stays about the same no matter\n// how many LEDs we're displaying\n// Param <seconds> - number of seconds to traverse the strip.\nfunction scaleSpeedToStrip(seconds) {\n  return (seconds / 65.356) * (pixelCount / 150);\n}\n\nfunction initWave(w,spd,dir,divisor) {\n  w[_speed] = scaleSpeedToStrip(spd * speed);\n  w[_direction] = (dir) ? waveForward : waveReverse;\n  w[_divisor] = divisor * wavelenScale;\n  w[_cSpeed] = w[_speed];\n  w[_cWlen] = w[_divisor];\n}\n\n// configure wavelengths and speeds  \nfunction setup() {\n  initWave(layer1,10, 1, 21);\n  initWave(layer2,6,  1, 9);\n  initWave(layer3,15, 0, 11);\n  initWave(layer4,22, 0, 5);  \n}\n\n// initialize gamma lookup table\nvar offs = -PI / 2\nfor (var i = 0; i < 512; i++) {\n  gamma[i] = pow(wave(offs+(i / 512)),4);\n}\n\n// initialize all waves\nsetup();\n\nexport function beforeRender(delta) {\n    var t = triangle(time(0.3))\n\n    layer1[3] = pixelCount * layer1[1](layer1[4]); \n    layer2[3] = pixelCount * layer2[1](layer2[4]);\n    layer3[3] = pixelCount * layer3[1](layer3[4]);\n    layer4[3] = pixelCount * layer4[1](layer4[4]); \n    layer4[5] = layer4[2] * (0.9 + ( t * 0.2))    \n\n    baseHue = aura + (0.02 * t);\n}\n\nexport function render(index) {\n  var h,s,v;\n\n// calculate brightness for this pixel  \n  v = gammatron(index);\n  h = baseHue - (depth * v * 0.3);  \n  s = whiteCaps - v;\n  \n  hsv(h, s, v)\n}\n"
  },
  "preview": "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"
}