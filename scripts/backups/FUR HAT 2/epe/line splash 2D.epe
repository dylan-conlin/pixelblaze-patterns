{
  "name": "line splash 2D",
  "id": "aD6bJjcTd2W5sdJaB",
  "sources": {
    "main": "/*\n Line Splash 2D \n Waves created by randomly dropping objects from random heights\n into a linear \"pond\".\n \n For performance, this is actually a system of springs rather\n than a true wave simulation.  \n \n Requires a 2D LED matrix and appropriate pixel mapper.\n \n NOTE that you must set the matrix dimensions in the pattern\n code for this to work properly.\n \n Version  Author        Date        Comment\n 1.0.0    JEM(ZRanger1) 10/16/2020 \n*/ \n\n// display size -- we depend on a matrix mapper being present,\n// but we still need to know the matrix dimensions\nvar displayWidth = 32;\nvar displayHeight = 8;\nvar initialLevel = displayHeight / 2;\nvar maxWidthIndex = displayWidth - 1;\n\n// constants affecting water behavior\nexport var tension = 0.007;   // spring tension -- affects bounce speed\nexport var damping = 0.008;   // decay rate of waves in the absence of other forces\nexport var spread = 0.003;    // energy from each cell passed to neighbors\n\n// storage for current state of our water \"surface\"\nvar waterLevel = array(displayWidth);\nvar waterSpeed = array(displayWidth);\n\n// animation controls\nvar dropInterval = 300;   // initial ms between rock drops\nvar frameTimer = 0;       // time accumulator for rock dropping\nvar lineWidth = 1.2;      // approx width of water surface \"line\"\nvar hue = 0.6666;         // color of water line\nvar hueTimer;\n\ninitWater();              // initialize water level and speed arrays\n\n// UI\nexport function sliderTension(v) {\n  tension = 0.05 * v * v;\n}\n\nexport function sliderDamping(v) {\n  damping = 0.05 * v * v;\n}\n\nexport function sliderSpread(v) {\n  spread = 0.01 * v * v;\n}\n\nexport function sliderLineWidth(v) {\n  lineWidth = 0.5 + (3 * v);\n}\n\n// initialize to calm waters.\nfunction initWater() {\n  for (var i = 0; i < displayWidth; i++) {\n    waterLevel[i] = initialLevel;\n    waterSpeed[i] = 0;\n  }\n}\n\nexport function beforeRender(delta) {\n  var i, n1, n2;\n  \n  hueTimer = time(0.1);\n  \n// periodically drop rocks in our pond  \n  frameTimer += delta;\n  if (frameTimer > dropInterval) {\n    waterSpeed[random(displayWidth)] = 0.1 * random(1+displayHeight / 2);\n    dropInterval = random(700);\n    frameTimer = 0;\n  }\n  \n// propagate the waves...  \n  for (i = 0; i < displayWidth; i++)  {\n  \n// apply tension and damping to current cell  \n    var newSpeed = initialLevel - waterLevel[i];\n    waterSpeed[i] += (tension * newSpeed) - (waterSpeed[i] * damping);\n    waterLevel[i] += waterSpeed[i];  \n\n// spread the energy around to the nearest neighbors to left... \n    n1 = clamp(i-1,0,maxWidthIndex); n2 = clamp(i-2,0,maxWidthIndex);\n    var lWave = spread * (waterLevel[i] - waterLevel[n2]);\n    lWave += spread * (waterLevel[i] - waterLevel[n1]);\n    waterSpeed[n1] += lWave;  \n    waterLevel[n1] += lWave;\n\n// and right.   \n    n1 = clamp(i+1,0,maxWidthIndex); n2 = clamp(i+2,0,maxWidthIndex);\n    var rWave = spread * (waterLevel[i] - waterLevel[n1]);\n    rWave += spread * (waterLevel[i] - waterLevel[n2]);    \n    waterSpeed[n1] += rWave;\n    waterLevel[n1] += rWave;  \n  }\n}\n\nexport function render2D(index,x,y) {\n  var s,b;\n  s = y * 1.75;\n  x *= displayWidth;\n  y *= displayHeight;\n  b = (abs(waterLevel[x]-y) < lineWidth) \n\n  hsv(hue,s,b)\n}"
  },
  "preview": "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"
}